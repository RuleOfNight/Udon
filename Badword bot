import discord
from discord.ext import commands
import asyncio

intents = discord.Intents.default()
intents.message_content = True
client = commands.Bot(command_prefix='!', intents=intents)

TOKEN = 'MTIwOTQ5OTg3MjU2MzA0MDI2Ng.GpehqK.Ui0q0S-MiXN-oXGwa3YgrIsnasT5gN9mB-k0mI'
MUTE_ROLE_NAME = 'T√π Nh√¢n'  # T√™n c·ªßa role mute
MUTE_TIME = 1800  # Th·ªùi gian mute trong gi√¢y (30 ph√∫t)

@client.event
async def on_ready():
    print(f'{client.user} gi√°ng l√¢m')

@client.event
async def on_message(message):
    if message.author == client.user:
        return

    if message.channel.name == 'üçÄ„Ä¢chat-chung':
        bad_words = ['ch·ªã 7', 'chj 7', 'c·ªã 7', 'cj 7', 'Ch·ªã 7', 'Chj 7', 'C·ªã 7', 'Cj 7', 'ch·ªã b·∫£i', 'ch·ªã B·∫£i', 'Ch·ªã b·∫£i', 'chj B·∫£i', 'Chj b·∫£i', 'Chj B·∫£i', 'c·ªã B·∫£i', 'C·ªã b·∫£i', 'C·ªã B·∫£i', 'cj B·∫£i', 'Cj b·∫£i', 'Cj B·∫£i', 'ch·ªã 7', 'chj 7', 'c·ªã 7', 'cj 7', 'Ch·ªã 7', 'Chj 7', 'C·ªã 7', 'Cj 7', 'ch·ªã b·∫£y', 'ch·ªã B·∫£y', 'Ch·ªã b·∫£y', 'chj B·∫£y', 'Chj b·∫£y', 'Chj B·∫£y', 'c·ªã B·∫£y', 'C·ªã b·∫£y', 'C·ªã B·∫£y', 'cj B·∫£y', 'Cj b·∫£y', 'Cj B·∫£y', 'chi7', 'Chi7', 'ch·ªã7', 'Ch·ªã7', 'Ch! B·∫£i', '7 onee san', '7 onee chan']
        if any(word in message.content.lower() for word in bad_words):
            await mute_user(message.author, message.channel)

    await client.process_commands(message)

async def mute_user(user, channel):
    guild = user.guild
    mute_role = discord.utils.get(guild.roles, name=MUTE_ROLE_NAME)

    if not mute_role:
        mute_role = await guild.create_role(name=MUTE_ROLE_NAME)
        for ch in guild.channels:
            await ch.set_permissions(mute_role, send_messages=False)

    await user.add_roles(mute_role)
    print(f'{user.display_name} ƒë√£ b·ªã mute.')

    # G·ª≠i th√¥ng b√°o v√†o k√™nh chat
    await channel.send(f'{user.mention} ƒë√£ b·ªã l√†m gi·∫£ l·∫≠p ng∆∞·ªùi c√¢m trong 30p')

    # ƒê·ª£i 30 ph√∫t
    await asyncio.sleep(MUTE_TIME)

    # H·ªßy role mute sau 30 ph√∫t
    await user.remove_roles(mute_role)
    print(f'{user.display_name} ƒë√£ ƒë∆∞·ª£c h·ªßy mute.')

client.run(TOKEN)
